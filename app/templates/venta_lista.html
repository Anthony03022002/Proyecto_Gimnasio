{% extends "base_admin.html" %}
{% block title %}Venta registrada{% endblock %}
{% set active = "facturacion_nueva" %}

{% block header %}
<header class="h-20 bg-surface-dark/50 backdrop-blur-md px-5 md:px-8 flex items-center justify-between sticky top-0 z-10 border-b border-white/5">
  <div>
    <button
      type="button"
      class="md:hidden p-2 rounded-lg hover:bg-white/5 text-secondary hover:text-white transition-colors"
      onclick="openDrawer()"
      aria-label="Abrir menú"
    >
      <span class="material-symbols-outlined">menu</span>
    </button>
    <h2 class="text-xl md:text-2xl font-bold text-white">Venta registrada</h2>
    <p class="text-xs text-secondary mt-0.5">Resumen y credenciales del cliente</p>
  </div>
</header>
{% endblock %}

{% block content %}

<div class="max-w-6xl mx-auto px-6 md:px-8 py-6">
  <div class="flex justify-center">
    <div class="w-full max-w-4xl space-y-6">

      <div class="bg-surface-dark rounded-2xl shadow-sm border border-white/5 overflow-hidden">
        <div class="p-6 border-b border-white/5">
          <h3 class="text-lg font-bold text-white flex items-center gap-2">
            <span class="text-green-400">✅</span> Venta registrada
          </h3>

        </div>

        <div class="p-6 space-y-4">
          {% set cred = credenciales if credenciales is defined and credenciales else {} %}

          {% if cred.get('password') %}
            <div class="rounded-2xl border border-yellow-500/20 bg-yellow-500/10 p-5">
              <div class="text-sm font-semibold text-yellow-200 mb-2">
                Credenciales del cliente (mostrar UNA sola vez)
              </div>

              <div class="text-sm text-secondary">
                Usuario:
                <span class="text-white font-semibold">{{ cred.get('username') }}</span>
              </div>
              <div class="text-sm text-secondary mt-1">
                Contraseña:
                <span class="text-white font-semibold">{{ cred.get('password') }}</span>
              </div>

              <div class="mt-3 text-xs text-secondary/80">
                Recomendación: copia y entrégalas al cliente ahora; luego no volverán a mostrarse.
              </div>
            </div>
          {% else %}
            <div class="rounded-2xl border border-white/10 bg-white/5 p-5">
              <div class="text-sm text-secondary">
                El cliente ya existía. No se generaron nuevas credenciales.
              </div>
            </div>
          {% endif %}

          <div class="flex flex-wrap justify-end gap-2 pt-2">
            <a
              href="{{ url_for('web.facturacion_nueva') }}"
              class="px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10
                     text-sm font-semibold text-white/90 transition-colors"
            >
              Nueva venta
            </a>

            <a
              href="{{ url_for('web.cajero_dashboard') }}"
              class="px-4 py-2 rounded-lg bg-accent hover:bg-accent/90
                     text-sm font-semibold text-white transition-colors"
            >
              Volver
            </a>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

{% endblock %}
