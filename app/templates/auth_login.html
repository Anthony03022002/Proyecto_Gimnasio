{% extends "base.html" %}

{% block title %}Login - Horarios{% endblock %}

{% block content %}
<div class="row justify-content-center mt-4">
  <div class="col-md-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="card-title mb-3 text-center">Iniciar sesión</h5>

        <form method="post" action="{{ url_for('web.login_post') }}">
          <div class="mb-3">
            <label class="form-label">Usuario</label>
            <input type="text" name="username" class="form-control" required autofocus>
          </div>

          <div class="mb-3">
            <label class="form-label">Contraseña</label>

            <div class="input-group">
              <input id="passwordInput" type="password" name="password" class="form-control" required>
              <button
                class="btn btn-outline-secondary"
                type="button"
                id="togglePasswordBtn"
                aria-label="Mostrar u ocultar contraseña"
              >
                <i id="togglePasswordIcon" class="bi bi-eye"></i>
              </button>
            </div>

          </div>

          <div class="d-grid">
            <button type="submit" class="btn btn-primary">Entrar</button>
          </div>
        </form>

      </div>
    </div>
  </div>
</div>

<script>
  (function () {
    const input = document.getElementById("passwordInput");
    const btn = document.getElementById("togglePasswordBtn");
    const icon = document.getElementById("togglePasswordIcon");

    if (!input || !btn || !icon) return;

    btn.addEventListener("click", () => {
      const isPassword = input.type === "password";
      input.type = isPassword ? "text" : "password";
      icon.classList.toggle("bi-eye", !isPassword);
      icon.classList.toggle("bi-eye-slash", isPassword);
    });
  })();
</script>
{% endblock %}
